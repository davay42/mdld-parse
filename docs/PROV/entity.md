[mdld] <https://mdld.js.org/>
[cat] <mdld:prov/>
[ex] <mdld:prov/example/entity/>
[xsd] <http://www.w3.org/2001/XMLSchema#>

# Entity {=prov:Entity .Class label}

> A physical, digital, conceptual, or otherwise thing that can be described. Entities are the core objects in provenance that we track and describe. {?comment}

<http://www.w3.org/ns/prov#Entity> {?cat:fullIRI}

---

## üß© Core Concept

Entities represent **things that exist and can be described** - documents, datasets, web pages, ideas, or any identifiable resource. In provenance graphs, entities are what we track the history and origins of.

**Key characteristics:**
- ‚úÖ **Identifiable** - has a URI or identifier
- ‚úÖ **Describable** - can have properties and metadata  
- ‚úÖ **Traceable** - can have provenance relationships
- ‚úÖ **Immutable state** - represents a specific state at a specific time

---

## üìã Entity Validation Shape

The **Entity Shape** {=ex:EntityShape .sh:NodeShape ?cat:hasShape label} ensures proper entity modeling by targeting all [Entity] {+prov:Entity ?sh:targetClass} instances.

### Required Properties

**Entity Generation Rule** {=ex:#entityGeneration .sh:PropertyShape ?sh:property} requires [wasGeneratedBy] {+prov:wasGeneratedBy ?sh:path} to have at least [1] {sh:minCount ^^xsd:integer} value: **Entity must be generated by an activity** {sh:message}

{=ex:EntityShape}

**Entity Type Rule** {=ex:#entityType .sh:PropertyShape ?sh:property} requires [type] {+rdf:type ?sh:path} to include [Entity] {sh:hasValue prov:Entity}: **Must be declared as prov:Entity** {sh:message}

### Optional Properties

**Generation Time Rule** {=ex:#generationTime .sh:PropertyShape ?sh:property} allows [generatedAtTime] {+prov:generatedAtTime ?sh:path} to be a [dateTime] {sh:datatype xsd:dateTime} for timestamping.

---

## üìù Test Data {=ex:data .Container ?cat:hasData}

### Document {=ex:document .prov:Entity}

A properly formed entity with generation activity and timestamp.

Generated by: [Writing Activity] {+ex:writingActivity ?prov:wasGeneratedBy}
Generated at: [2026-02-20T10:00:00Z] {prov:generatedAtTime ^^xsd:dateTime}

### Invalid Entity {=ex:invalidEntity .prov:Entity}

Missing required generation activity - will fail validation.

### Non-Entity Resource {=ex:nonEntity .ex:Resource}

Should not be targeted by entity validation (not a prov:Entity).

---

[Shape] {=ex:EntityShape} must produce exactly **1** {cat:expectsViolations ^^xsd:integer} violation.

### Expected Validation Results {=ex:results ?cat:hasResults}

1. **Document** - passes (has generation activity and proper type)
2. **Invalid Entity** - fails (missing wasGeneratedBy)  
3. **Non-Entity Resource** - not validated (not a prov:Entity)

---

## üîç Test Validation

```bash
# Should show 1 violation - missing wasGeneratedBy
ig-cli validate ./entity.md
```

---

## üéØ Authoring Patterns

### **Basic Entity Pattern:**
```md
# My Document {ex:myDoc .prov:Entity}
Generated by: [Writing] {+ex:writing ?prov:wasGeneratedBy}
Generated at: [2026-02-20T10:00:00Z] {prov:generatedAtTime ^^xsd:dateTime}
```

### **Entity with Properties:**
```md
# Dataset {ex:dataset .prov:Entity}
Generated by: [Processing] {+ex:process ?prov:wasGeneratedBy}
Size: [1024] {ex:size ^^xsd:integer}
Format: [JSON] {ex:format}
```

### **Entity Derivation Chain:**
```md
# Report v2 {ex:reportV2 .prov:Entity}
Generated by: [Update Process] {+ex:update ?prov:wasGeneratedBy}
Derived from: [Report v1] {+ex:reportV1 ?prov:wasDerivedFrom}
```

---

## ‚ö° Key Benefits

- **Traceability** - every entity has clear origin
- **Auditability** - complete generation history  
- **Interoperability** - standard PROV-O semantics
- **Validation** - SHACL ensures data quality
- **Streaming** - works with MDLD's incremental parsing

---

## üîÑ Related Terms

- **Activity** - what generates entities
- **Agent** - who controls activities  
- **wasGeneratedBy** - links entity to activity
- **wasDerivedFrom** - links entity to source entity
- **generatedAtTime** - when entity was created
