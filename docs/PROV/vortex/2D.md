# PROV-Vortex 2D: Knowledge Vehicle Dynamics

## Abstract

The 2D PROV-Vortex models provenance as a **vortex pair** (dipole vortex) moving through information space. This simplifies the 3D toroidal model while preserving the core physics: mass (Entities) and momentum (Activities) create a self-propagating knowledge vehicle with measurable flow dynamics and pressure boundaries.

---

## Physical Foundation: Vortex Pair Dynamics

### Vortex Pair Structure

A vortex pair consists of two counter-rotating vortices that create a self-propagating system:

```
↑ Counterclockwise Vortex        ↓ Clockwise Vortex
      ● ←→ ←→ ←→ ●
      ←→ ←→ ←→ ←→ ←→  ← Propagation Direction
      ←→ ←→ ←→ ←→ ←→
      ● ←→ ←→ ←→ ●
```

**Key Physics**:
- **Self-propagation**: Induced velocity field moves pair forward
- **Momentum conservation**: Total circulation remains constant
- **Pressure equilibrium**: Counter-rotation creates stable configuration

---

## PROV-O Component Mapping

### Mass-Momentum System

| Physical Component | PROV-O Element | Function in Knowledge Vehicle |
|------------------|----------------|------------------------------|
| **Mass** | `prov:Entity` | Knowledge mass/information content |
| **Momentum** | `prov:Activity` | Velocity/force of transformation |
| **Vortex Core** | `prov:Agent` | Energy source/driving force |
| **Pressure Field** | `prov:Plan` | Constraint boundaries |
| **Flow Field** | `prov:used/prov:wasGeneratedBy` | Causal field lines |

### 2D Vehicle Geometry

```
                    ← Time/Progress Direction ─

    High Pressure          Low Pressure           High Pressure
    (Knowledge Mass)    (Agent Intent)        (Knowledge Mass)
        ↑                   ↓                     ↑
    [Entity] ←→ [Activity] ←→ [Entity] ←→ [Activity] ←→ [Entity]
        ↑                   ↓                     ↑
    Collection          Agent                 Collection
        ↑                   ↓                     ↑
    [Entity] ←→ [Activity] ←→ [Entity] ←→ [Activity] ←→ [Entity]
        ↑                   ↓                     ↑
    Low Pressure         High Pressure          Low Pressure
    (Processed)         (Processing)          (Processed)
```

---

## Mathematical Framework

### Circulation and Momentum

**Total Circulation**:
```
Γ_total = Γ_clockwise + Γ_counterclockwise
```

**Propagation Velocity**:
```
v_propagation = Γ_total / (2π × d)
```
Where `d` = separation between vortices (plan complexity)

**Reynolds Number for Knowledge**:
```
Re = (ρ × v × L) / μ
```
Where:
- `ρ` = Information density (entities per unit)
- `v` = Agent activity velocity
- `L` = Plan length (characteristic scale)
- `μ` = System viscosity (friction/resistance)

### Flow Regimes

| Reynolds Range | Flow Type | Knowledge System Behavior |
|----------------|-----------|---------------------------|
| **Re < 1** | Laminar | Human-only, deliberate, high-trust |
| **1 < Re < 100** | Transitional | Human-AI collaboration, moderate speed |
| **Re > 100** | Turbulent | AI agents, high-speed, strong constraints |

---

## Pressure and Boundaries

### Pressure Field Dynamics

**High Pressure Zones** (Knowledge Mass):
- Dense information concentration
- Potential energy storage
- Source of downstream flow

**Low Pressure Zones** (Agent Processing):
- Transformation regions
- Kinetic energy conversion
- Sink for upstream flow

**Pressure Gradient**:
```
ΔP = P_high - P_low = ½ρ(v²_out - v²_in)
```

### Boundary Conditions

**Inner Boundary** (Plan Constraints):
```turtle
tag:shapes:InnerBoundary
    a sh:NodeShape ;
    sh:targetClass prov:Activity ;
    sh:property [
        sh:path prov:hadPlan ;
        sh:minCount 1 ;
        sh:description "Activity must respect pressure boundary" ;
    ] .
```

**Outer Boundary** (System Limits):
```turtle
tag:shapes:OuterBoundary
    a sh:NodeShape ;
    sh:targetClass prov:Entity ;
    sh:property [
        sh:path prov:wasGeneratedBy ;
        sh:minCount 1 ;
        sh:description "Entity must originate from bounded activity" ;
    ] .
```

---

## Mass Transfer and Conservation

### Quadrupole Mass Flow Equations

**4-Channel Continuity Equation**:
```
∂ρ/∂t + ∇·(ρv) = Σ(S_in - S_out)
```

Where mass flow through each quadrants:
- **S_in (Top Left)**: External entity inflow rate
- **S_out (Top Right)**: External activity discharge rate
- **Internal Processing**: Bottom quadrants exchange mass

**Mass Conservation by Quadrant**:
```
ρ_TL + ρ_BL = ρ_TR + ρ_BR + ρ_accumulated
```

### Energy Distribution in 4-State System

**Quadrupole Energy Equation**:
```
E_total = KE_external + KE_internal + PE_plan + PE_core
```

Where:
- `KE_external` = ½ρ_TR × v_TR² (Top Right tool activities)
- `KE_internal` = ½ρ_BR × v_BR² (Bottom Right reasoning)
- `PE_plan` = Plan constraint potential energy
- `PE_core` = Grounded truth binding energy

**Energy Flow Balance**:
```
∂E/∂t = Power_in - Power_out + Dissipation
```

### Phase Transitions

**Intake Phase** (Top Left → Bottom Right):
- External entities gain internal structure
- Energy increases due to processing work
- SHACL validation acts as "filter"

**Power Phase** (Bottom Right → Top Right):
- Internal knowledge converted to external action
- Maximum energy extraction point
- Plan constraints limit power output

**Exhaust Phase** (Top Right → Bottom Left):
- External action results solidified into truth
- Energy dissipation through SHACL validation
- System returns to low-entropy state

---

## 4-State Quadrupole Engine Dynamics

### Advanced Vortex Architecture

The 2D PROV-Vortex evolves into a **quadrupole-style engine** where the Plan acts as a **stator** (central axle) and four states function as **rotors** creating a forced vortex through a central constriction.

```
    Top Left (External)    Top Right (External)
    [Entity Sources]        [Tool Activities]
         ↑                    ↓
         ←→ ←→ ←→ ←→      ← Propagation
    [Grounded Truth]        [LLM Reasoning]
         ↓                    ↑
    Bottom Left (Internal)   Bottom Right (Internal)
    [Statements]            [Inference Activities]
```

### Four-Quadrant Manifold Mapping

| Quadrant | PROV-O/SHACL Elements | Physics/Geometry Analogy | Function |
|----------|---------------------|---------------------|----------|
| **Top Left** | `prov:Entity` (External) | **Inlet Flow** | High-energy raw material from ambient field |
| **Bottom Left** | `rdf:Statement` (Internal) | **Vortex Core** | Dense, low-velocity "frozen" knowledge |
| **Top Right** | `prov:Activity` (External) | **Propulsion Jet** | High-velocity discharge to external world |
| **Bottom Right** | `prov:Activity` (Internal) | **Internal Circulation** | Low-velocity "combustion" processing |

### Central Orifice Plate (Plan as Stator)

The **prov:Plan** functions as a **SHACL-guarded orifice plate** that constricts and directs flow:

**Physical Function**:
- **Pressure Differential**: Creates gradient between internal and external activities
- **Flow Focusing**: Concentrates energy through defined aperture
- **Jet Formation**: Shapes discharge pattern of external activities

**SHACL Implementation**:
```turtle
tag:shapes:OrificePlate
    a sh:NodeShape ;
    sh:targetClass prov:Plan ;
    sh:property [
        sh:path mdp:pressureDifferential ;
        sh:datatype xsd:decimal ;
        sh:description "Required pressure gradient for flow" ;
    ] ;
    sh:property [
        sh:path mdp:apertureDiameter ;
        sh:datatype xsd:decimal ;
        sh:description "Flow constriction width" ;
    ] .
```

---

## Vehicle Dynamics

### Propulsion Mechanism

**Quadrupole Engine Dynamics**:
When circulation exceeds critical threshold in the 4-state system:

```
∂v/∂t = (Γ_total × B_orifice) / ρ
```

Where:
- `Γ_total` = Combined circulation of all four rotors
- `B_orifice` = Magnetic field of central Plan constriction
- `ρ` = Information density in each quadrants

**Complete 4-Stroke Combustion Cycle**:
1. **Intake (Top Left)**: External prov:Entity enters high-pressure inlet
2. **Compression (Bottom Right)**: Internal prov:Activity processes against Plan constraint
3. **Power (Top Right)**: External prov:Activity discharges to environment
4. **Exhaust (Bottom Left)**: Grounded rdf:Statement recorded as solidified truth

### Steering and Navigation

**Quadrupole Control Surfaces**:
- **Inlet Vanes** (Top Left): Control external entity flow rate
- **Compression Chamber** (Bottom Right): Regulate internal processing pressure
- **Nozzle Geometry** (Top Right): Shape external activity discharge pattern
- **Exhaust Port** (Bottom Left): Control truth solidification rate

**Circulation Adjustment**:
- **Balanced Operation**: |Γ_left| ≈ |Γ_right| for stable propagation
- **Steering**: Differential circulation between left/right pairs
- **Thrust Control**: Total circulation magnitude for speed regulation

**Plan-Based Steering**:
```turtle
# Steering Constraint
tag:shapes:SteeringControl
    a sh:NodeShape ;
    sh:targetClass prov:Plan ;
    sh:property [
        sh:path prov:wasDerivedFrom ;
        sh:minCount 1 ;
        sh:description "Plan must derive from Goal" ;
    ] ;
    sh:property [
        sh:path prov:wasAttributedTo ;
        sh:minCount 1 ;
        sh:description "Plan must be attributed to Agent" ;
    ] .
```

---

## Stability and Control

### Stability Criteria

**Linear Stability**:
```
∂²Γ/∂t² + ω²Γ = 0
```
Where `ω` = natural frequency of oscillation

**Stability Conditions**:
1. **Circulation balance**: |Γ_clockwise| ≈ |Γ_counterclockwise|
2. **Separation maintenance**: Constant vortex distance
3. **Pressure equilibrium**: Balanced high/low pressure zones

### Control Mechanisms

**SHACL as Control Surfaces**:
- **Elevators**: Control vertical (quality) movement
- **Rudders**: Control horizontal (direction) movement  
- **Flaps**: Control speed (momentum) of propagation

**Feedback Control**:
```turtle
# Feedback Controller
tag:shapes:FeedbackControl
    a sh:NodeShape ;
    sh:targetClass prov:Activity ;
    sh:property [
        sh:path prov:used ;
        sh:minCount 1 ;
        sh:description "Must use previous result for feedback" ;
    ] ;
    sh:property [
        sh:path [ sh:inversePath prov:wasGeneratedBy ] ;
        sh:minCount 1 ;
        sh:description "Must generate result for next feedback" ;
    ] .
```

---

## Granularity-Viscosity Scale Dynamics

### Three Scales as Vortex Density

As knowledge flows through the 4-state system, it undergoes **phase transitions** in information density, analogous to fluid viscosity changes:

#### A. Document Scale (Macro-Flow - Boundary Layer)
- **Status**: `prov:Entity` as complete files/documents
- **4-State Role**: Top-Left (External Entity) - High-velocity intake
- **Physics Analogy**: **Boundary layer flow** - high momentum, low precision
- **Viscosity**: Low (fluid moves freely)
- **Function**: Raw material intake, initial processing

#### B. Collection Scale (Meso-Flow - Streamline Dynamics)  
- **Status**: `prov:Collection` as organized knowledge bundles
- **4-State Role**: Internal transition zones
- **Physics Analogy**: **Streamline flow** - organized particle paths
- **Viscosity**: Medium (guided flow)
- **Function**: Knowledge organization, batch processing

#### C. Statement Scale (Micro-Flow - Core Dynamics)
- **Status**: `rdf:Statement` as atomic grounded facts
- **4-State Role**: Bottom-Left (Internal Entity) - Low-velocity core
- **Physics Analogy**: **Laminar core flow** - high precision, low momentum
- **Viscosity**: High (resistant to chaotic motion)
- **Function**: Truth storage, foundational stability

### Viscosity Transitions

**Phase Change Equation**:
```
μ_effective = μ_base × (1 + α × compression_ratio)
```

Where:
- `μ_base` = Base system viscosity
- `α` = Compression coefficient
- `compression_ratio` = Document → Collection → Statement density increase

**Compression Ratio**:
```
R = ρ_statements / ρ_documents
```

High R (> 10) = **Informational Solidification**
Low R (< 2) = **Knowledge Diffusion**

---

## Advanced PROV-O Flow Terms

### I. prov:wasInfluencedBy (Turbulence Coupling)

**Function**: Links activities without direct mass transfer
**Use Case**: Internal LLM reasoning influenced by external context
```turtle
{=tag:activity:reasoning_001 .prov:Activity}
{? prov:wasInfluencedBy tag:context:market_trends}
{? prov:used tag:entity:research_data}
```

**SHACL Constraint**:
```turtle
tag:shapes:InfluenceShape
    a sh:NodeShape ;
    sh:targetClass prov:Activity ;
    sh:property [
        sh:path prov:wasInfluencedBy ;
        sh:nodeKind sh:IRI ;
        sh:description "Influence must be traceable to source" ;
    ] .
```

### II. prov:wasInformedBy (Momentum Transfer)

**Function**: Direct activity-to-activity triggering
**Use Case**: Tool-call triggered by LLM reasoning
```turtle
{=tag:activity:tool_call_001 .prov:Activity}
{? prov:wasInformedBy tag:activity:reasoning_001}
{? prov:used tag:entity:api_parameters}
```

**Physics Analogy**: **Momentum transfer** bypasses vortex core for high-speed execution

### III. prov:alternateOf / prov:specializationOf (Phase States)

**Function**: Multiple representations of same knowledge
**Use Case**: JSON result + Markdown summary of same processing
```turtle
{=tag:entity:json_result .prov:Entity}
{=tag:entity:md_summary .prov:Entity}
{? prov:alternateOf tag:entity:json_result}
```

**SHACL Constraint**:
```turtle
tag:shapes:AlternateShape
    a sh:NodeShape ;
    sh:targetClass prov:Entity ;
    sh:property [
        sh:path prov:alternateOf ;
        sh:minCount 1 ;
        sh:description "Alternates must reference same base knowledge" ;
    ] .
```

### IV. prov:qualifiedDerivation (Refinement Logic)

**Function**: Detailed transformation metadata
**Use Case**: Document refinement with specific methodology
```turtle
{=tag:entity:refined_doc .prov:Entity}
{? prov:wasDerivedFrom tag:entity:raw_doc}
{? prov:qualifiedDerivation [
    a prov:Derivation ;
    prov:hadActivity tag:activity:refinement ;
    prov:hadPlan tag:plan:refinement_protocol
]}
```

**Physics Analogy**: **Orifice calibration** - controlled transformation through defined constriction

---

## Quadrupole Flow Mapping with Advanced Terms

### Complete 4-Stroke Cycle

```
1. INTAKE (Top Left):
   prov:Entity (Document) 
   ↓ prov:wasInfluencedBy (external context)
   
2. REFINEMENT (Bottom Right):
   prov:Activity (Internal LLM)
   ↓ prov:specializationOf (extract from Document)
   ↓ prov:wasInformedBy (trigger next Activity)
   
3. VALIDATION (Top Right):
   prov:Activity (External Tool)
   ↓ prov:wasDerivedFrom (use refined Entity)
   
4. GROUNDING (Bottom Left):
   prov:Collection (Statements)
   ← prov:alternateOf (Document + Statement versions)
```

### Compression Ratio Dynamics

**Self-Regulating System**:
```turtle
tag:shapes:CompressionControl
    a sh:NodeShape ;
    sh:targetClass prov:Plan ;
    sh:property [
        sh:path mdp:targetCompressionRatio ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 2.0 ;
        sh:maxInclusive 10.0 ;
        sh:description "Optimal information density for system stability" ;
    ] .
```

**Adaptive Viscosity**:
- **High turbulence** (Re > 100): Increase μ to prevent chaotic flow
- **Low processing** (Re < 1): Decrease μ to enable rapid circulation
- **Optimal range** (1 < Re < 100): Balance between speed and stability

---

## Self-Correcting Manifold Dynamics

### Compression Ratio as Health Metric

**Optimal Compression**: R = 3-7 (balanced knowledge density)
```sparql
SELECT ?compression_health WHERE {
  (COUNT(?statements) / COUNT(?documents)) AS ?compression_ratio
  BIND(
    IF(?compression_ratio < 2.0, "Under-processed - High viscosity needed",
    IF(?compression_ratio > 10.0, "Over-solidified - Low viscosity needed",
    "Optimal compression"
  ) AS ?compression_health
}
```

### Viscosity Auto-Adjustment

**Reynolds-Adaptive System**:
```turtle
tag:shapes:AdaptiveViscosity
    a sh:NodeShape ;
    sh:targetClass prov:Plan ;
    sh:property [
        sh:path mdp:adaptiveViscosity ;
        sh:datatype xsd:boolean ;
        sh:description "Enable automatic viscosity adjustment based on Reynolds" ;
    ] .
```

**Adjustment Algorithm**:
```
IF Re > 100 AND violations > threshold:
    μ = μ × 1.5  # Increase viscosity
ELSE IF Re < 1 AND processing_rate < threshold:
    μ = μ × 0.7  # Decrease viscosity
```

### Multi-Scale Energy Conservation

**Cross-Scale Energy Equation**:
```
E_total = E_macro + Σ(E_meso) + Σ(E_micro)
```

Where:
- `E_macro` = Document kinetic energy (½ρ_doc × v²_intake)
- `E_meso` = Collection binding energy (organizational work)
- `E_micro` = Statement potential energy (truth value × grounding_strength)

**Conservation with Compression**:
```
dE/dt = Power_in - Power_out - Compression_work
```

Where compression_work = energy required to maintain optimal compression ratio.

---

## Practical Implementation

### 4-Stroke Quadrupole Workflow

**Complete Combustion Cycle** for knowledge propulsion:

```markdown
# Stroke 1: Intake (Top Left - External Entity)
## Initial input {=tag:entity:external_001 .prov:Entity}
[Raw research data from web] {label} coming from [Web search] {prov:hadPrimarySource +tag:source:web_search}

# Stroke 2: Compression (Bottom Right - Internal Processing)  
## Initial process {=tag:activity:process_001 .prov:Activity}
From [first note] {?prov:used +tag:entity:external_001}
With [Plan] {?prov:hadPlan +tag:plan:research_protocol}

[Processed] {?prov:qualifiedAssociation =tag:plan:association_001} following the [Research Protocol] {?prov:hadPlan +tag:plan:research_protocol} by [LLM Agent] {?prov:agent +tag:agent:llm_processor}



# Stroke 3: Power (Top Right - External Action)
{=tag:activity:action_001 .prov:Activity}
{?prov:used tag:entity:processed_001}
{?prov:hadPlan tag:plan:research_protocol}
{?prov:qualifiedAssociation [
    prov:hadPlan tag:plan:research_protocol ;
    prov:agent tag:agent:tool_executor
]}

# Stroke 4: Exhaust (Bottom Left - Grounded Truth)
{=tag:entity:grounded_001 .rdf:Statement .prov:Entity}
{?rdf:subject +tag:concept:research_finding}
{?rdf:predicate +tag:pred:hasValue}
[Processed result] {?rdf:object}
{?prov:wasGeneratedBy +tag:activity:action_001}
```

### Quadrupole SHACL Seed

```turtle
# 4-State Engine Constraints
tag:shapes:QuadrupoleEngine
    a sh:NodeShape ;
    sh:targetClass prov:Activity ;
    sh:property [
        sh:path prov:used ;
        sh:minCount 1 ;
        sh:description "Must inhale from appropriate quadrants" ;
    ] ;
    sh:property [
        sh:path prov:hadPlan ;
        sh:minCount 1 ;
        sh:description "Must follow authorized plan" ;
    ] ;
    sh:property [
        sh:path [ sh:inversePath prov:wasGeneratedBy ] ;
        sh:minCount 1 ;
        sh:description "Must exhale to appropriate quadrants" ;
    ] .

# Entity Quadrant Constraints
tag:shapes:EntityQuadrants
    a sh:NodeShape ;
    sh:targetClass prov:Entity ;
    sh:property [
        sh:path prov:wasDerivedFrom ;
        sh:description "External entities must have sources" ;
    ] ;
    sh:property [
        sh:path prov:wasGeneratedBy ;
        sh:description "Grounded entities must have activities" ;
    ] .
```

### Quadrupole Performance Metrics

**Thrust Efficiency**:
```sparql
SELECT ?efficiency WHERE {
  # Calculate ratio of external actions to internal processing
  (COUNT(?external_activities) / COUNT(?internal_activities)) AS ?efficiency
  WHERE {
    ?external_activity a prov:Activity ;
                 prov:hadPlan ?plan .
    ?internal_activity a prov:Activity ;
                 prov:hadPlan ?plan .
  }
}
```

**Circulation Balance**:
```sparql
SELECT ?balance WHERE {
  # Ensure left-right circulation balance
  ABS(SUM(?left_circulation) - SUM(?right_circulation)) AS ?balance
  WHERE {
    ?activity a prov:Activity .
    # Classify activities by quadrants and sum circulation
  }
}
```

**Mass Flow Rate**:
```sparql
SELECT ?flow_rate WHERE {
  # Calculate entity processing rate per time unit
  (COUNT(?entities) / ?time_duration) AS ?flow_rate
  WHERE {
    ?entity a prov:Entity ;
           prov:wasGeneratedBy ?activity .
    ?activity prov:startedAtTime ?start ;
            prov:endedAtTime ?end .
    BIND((?end - ?start) AS ?time_duration)
  }
}
```

---

## Measurement and Diagnostics

### Key Performance Indicators

**Circulation Strength**:
```sparql
SELECT (COUNT(?activity) AS ?circulation) WHERE {
  ?activity a prov:Activity ;
           prov:hadPlan ?plan .
}
```

**Propagation Velocity**:
```sparql
SELECT ?avg_velocity WHERE {
  ?activity a prov:Activity ;
           prov:startedAtTime ?start ;
           prov:endedAtTime ?end .
  BIND((?end - ?start) AS ?duration)
}
GROUP BY ?plan
```

**System Reynolds Number**:
```sparql
SELECT ?reynolds WHERE {
  # Calculate based on entity density, activity velocity, and plan complexity
  BIND(?entity_density * ?activity_velocity * ?plan_complexity / ?viscosity AS ?reynolds)
}
```

### Health Diagnostics

**Stability Check**:
- Circulation balance within 10%
- Separation distance within tolerance
- Pressure gradient maintained

**Efficiency Check**:
- Energy conservation across transformations
- Minimal turbulence (constraint violations)
- Optimal Reynolds range for application

---

## Applications and Use Cases

### Personal Knowledge Management
- **Low Reynolds** (Re < 1): Deliberate, high-trust learning
- **Simple constraints**: Basic SHACL validation
- **Linear propagation**: Sequential knowledge building

### Team Collaboration
- **Medium Reynolds** (1 < Re < 100): Coordinated workflows
- **Moderate constraints**: Team-specific SHACL rules
- **Branching propagation**: Parallel knowledge streams

### AI Agent Systems
- **High Reynolds** (Re > 100): High-speed processing
- **Strong constraints**: Comprehensive SHACL validation
- **Complex propagation**: Multi-agent coordination

---

## Conclusion

The 2D PROV-Vortex provides a **mathematically rigorous** yet **practically implementable** framework for provenance management. By treating knowledge as a mass-momentum vehicle with measurable physics:

- **Predictable behavior** through fluid dynamics principles
- **Controllable propagation** via pressure and circulation management  
- **Scalable complexity** from laminar to turbulent flow regimes
- **Measurable performance** using Reynolds number and circulation metrics

This 2D approach maintains the scientific innovation of treating provenance as a physical system while providing clear implementation pathways for real-world knowledge management applications.
